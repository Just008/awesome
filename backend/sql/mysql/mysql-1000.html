<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一千行 MySQL 学习笔记 | Awesome</title>
    <meta name="description" content="多少殷勤全白付，当年戏语误青丝。">
    <link rel="icon" href="/awesome/favicon.ico">
    
    <link rel="preload" href="/awesome/assets/css/0.styles.c7e0f778.css" as="style"><link rel="preload" href="/awesome/assets/js/app.8cf76ae9.js" as="script"><link rel="preload" href="/awesome/assets/js/34.7d0f52fc.js" as="script"><link rel="prefetch" href="/awesome/assets/js/10.3075fc80.js"><link rel="prefetch" href="/awesome/assets/js/11.495c26c8.js"><link rel="prefetch" href="/awesome/assets/js/12.6c4cb92a.js"><link rel="prefetch" href="/awesome/assets/js/13.223b913a.js"><link rel="prefetch" href="/awesome/assets/js/14.7c69b723.js"><link rel="prefetch" href="/awesome/assets/js/15.1fc75eaf.js"><link rel="prefetch" href="/awesome/assets/js/16.857c83a6.js"><link rel="prefetch" href="/awesome/assets/js/17.37bad7c1.js"><link rel="prefetch" href="/awesome/assets/js/18.81a7b35a.js"><link rel="prefetch" href="/awesome/assets/js/19.965e5d7a.js"><link rel="prefetch" href="/awesome/assets/js/2.91f3fac3.js"><link rel="prefetch" href="/awesome/assets/js/20.29b17134.js"><link rel="prefetch" href="/awesome/assets/js/21.a9565424.js"><link rel="prefetch" href="/awesome/assets/js/22.4e12257d.js"><link rel="prefetch" href="/awesome/assets/js/23.d4b367e2.js"><link rel="prefetch" href="/awesome/assets/js/24.ed5ea60c.js"><link rel="prefetch" href="/awesome/assets/js/25.4e3cfe7d.js"><link rel="prefetch" href="/awesome/assets/js/26.d82204e3.js"><link rel="prefetch" href="/awesome/assets/js/27.e6d55455.js"><link rel="prefetch" href="/awesome/assets/js/28.f89cccc1.js"><link rel="prefetch" href="/awesome/assets/js/29.6d2602c7.js"><link rel="prefetch" href="/awesome/assets/js/3.293d6317.js"><link rel="prefetch" href="/awesome/assets/js/30.95ee547e.js"><link rel="prefetch" href="/awesome/assets/js/31.4d724ffd.js"><link rel="prefetch" href="/awesome/assets/js/32.83236c87.js"><link rel="prefetch" href="/awesome/assets/js/33.7d7c662a.js"><link rel="prefetch" href="/awesome/assets/js/35.fed876ed.js"><link rel="prefetch" href="/awesome/assets/js/36.d50d3ce5.js"><link rel="prefetch" href="/awesome/assets/js/37.ff579ca0.js"><link rel="prefetch" href="/awesome/assets/js/38.0a633d1f.js"><link rel="prefetch" href="/awesome/assets/js/39.1fd71fba.js"><link rel="prefetch" href="/awesome/assets/js/4.a1021806.js"><link rel="prefetch" href="/awesome/assets/js/40.b7f2f628.js"><link rel="prefetch" href="/awesome/assets/js/41.bb1c690c.js"><link rel="prefetch" href="/awesome/assets/js/42.848ee583.js"><link rel="prefetch" href="/awesome/assets/js/43.2cbc8dac.js"><link rel="prefetch" href="/awesome/assets/js/44.0d2d1cb1.js"><link rel="prefetch" href="/awesome/assets/js/45.349cafa9.js"><link rel="prefetch" href="/awesome/assets/js/46.7c031c27.js"><link rel="prefetch" href="/awesome/assets/js/47.ba69afb2.js"><link rel="prefetch" href="/awesome/assets/js/48.60e79dc9.js"><link rel="prefetch" href="/awesome/assets/js/49.e23be272.js"><link rel="prefetch" href="/awesome/assets/js/5.d1529520.js"><link rel="prefetch" href="/awesome/assets/js/50.8b2d3a41.js"><link rel="prefetch" href="/awesome/assets/js/51.ca015c29.js"><link rel="prefetch" href="/awesome/assets/js/52.87701b5f.js"><link rel="prefetch" href="/awesome/assets/js/53.ecbdf7fb.js"><link rel="prefetch" href="/awesome/assets/js/54.eea54ab8.js"><link rel="prefetch" href="/awesome/assets/js/55.c6a11cff.js"><link rel="prefetch" href="/awesome/assets/js/56.a9eb8dde.js"><link rel="prefetch" href="/awesome/assets/js/57.135d2e72.js"><link rel="prefetch" href="/awesome/assets/js/58.fa4cccd0.js"><link rel="prefetch" href="/awesome/assets/js/6.1eb05619.js"><link rel="prefetch" href="/awesome/assets/js/7.9181616b.js"><link rel="prefetch" href="/awesome/assets/js/8.c0fe1677.js"><link rel="prefetch" href="/awesome/assets/js/9.f2b6c430.js">
    <link rel="stylesheet" href="/awesome/assets/css/0.styles.c7e0f778.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/awesome/" class="home-link router-link-active"><!----> <span class="site-name">Awesome</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/awesome/" class="nav-link">首页</a></div><div class="nav-item"><a href="/awesome/guide/" class="nav-link">指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/web/vue/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/awesome/web/vue-book/" class="nav-link">Vue Book</a></li></ul></li><li class="dropdown-item"><h4>扩展</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/web/typescript/" class="nav-link">Typescript</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PHP</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/backend/php/laravel/" class="nav-link">Laravel</a></li><li class="dropdown-subitem"><a href="/awesome/backend/php/swoole/" class="nav-link">Swoole</a></li><li class="dropdown-subitem"><a href="/awesome/backend/php/design-pattern/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/awesome/backend/php/nginx/" class="nav-link">Nginx</a></li></ul></li><li class="dropdown-item"><h4>SQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/backend/sql/mysql/" class="nav-link router-link-active">Mysql</a></li><li class="dropdown-subitem"><a href="/awesome/backend/sql/redis/" class="nav-link">Redis</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/backend/other/git.html" class="nav-link">Git</a></li><li class="dropdown-subitem"><a href="/awesome/backend/other/markdown.html" class="nav-link">Markdown</a></li><li class="dropdown-subitem"><a href="/awesome/backend/interview/" class="nav-link">面试宝典</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/linux/docker/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/awesome/linux/vim.html" class="nav-link">Vim</a></li><li class="dropdown-subitem"><a href="/awesome/linux/supervisor.html" class="nav-link">Supervisor</a></li><li class="dropdown-subitem"><a href="/awesome/linux/screen.html" class="nav-link">Screen</a></li><li class="dropdown-subitem"><a href="/awesome/linux/bs.html" class="nav-link">Bash 命令</a></li></ul></li><li class="dropdown-item"><h4>运维方向</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/linux/lnmp.html" class="nav-link">LNMP 搭建</a></li><li class="dropdown-subitem"><a href="/awesome/linux/ab.html" class="nav-link">AB 测试工具</a></li><li class="dropdown-subitem"><a href="/awesome/linux/deployer-auto.html" class="nav-link">Deployer</a></li><li class="dropdown-subitem"><a href="/awesome/linux/sentry-auto.html" class="nav-link">Sentry 部署</a></li><li class="dropdown-subitem"><a href="/awesome/linux/sentry-auto-notice-error.html" class="nav-link">Sentry 异常提醒</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/awesome/leetcode/" class="nav-link">Leetcode</a></div> <a href="https://github.com/Just008/awesome" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/awesome/" class="nav-link">首页</a></div><div class="nav-item"><a href="/awesome/guide/" class="nav-link">指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/web/vue/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/awesome/web/vue-book/" class="nav-link">Vue Book</a></li></ul></li><li class="dropdown-item"><h4>扩展</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/web/typescript/" class="nav-link">Typescript</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PHP</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/backend/php/laravel/" class="nav-link">Laravel</a></li><li class="dropdown-subitem"><a href="/awesome/backend/php/swoole/" class="nav-link">Swoole</a></li><li class="dropdown-subitem"><a href="/awesome/backend/php/design-pattern/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/awesome/backend/php/nginx/" class="nav-link">Nginx</a></li></ul></li><li class="dropdown-item"><h4>SQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/backend/sql/mysql/" class="nav-link router-link-active">Mysql</a></li><li class="dropdown-subitem"><a href="/awesome/backend/sql/redis/" class="nav-link">Redis</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/backend/other/git.html" class="nav-link">Git</a></li><li class="dropdown-subitem"><a href="/awesome/backend/other/markdown.html" class="nav-link">Markdown</a></li><li class="dropdown-subitem"><a href="/awesome/backend/interview/" class="nav-link">面试宝典</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/linux/docker/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/awesome/linux/vim.html" class="nav-link">Vim</a></li><li class="dropdown-subitem"><a href="/awesome/linux/supervisor.html" class="nav-link">Supervisor</a></li><li class="dropdown-subitem"><a href="/awesome/linux/screen.html" class="nav-link">Screen</a></li><li class="dropdown-subitem"><a href="/awesome/linux/bs.html" class="nav-link">Bash 命令</a></li></ul></li><li class="dropdown-item"><h4>运维方向</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/awesome/linux/lnmp.html" class="nav-link">LNMP 搭建</a></li><li class="dropdown-subitem"><a href="/awesome/linux/ab.html" class="nav-link">AB 测试工具</a></li><li class="dropdown-subitem"><a href="/awesome/linux/deployer-auto.html" class="nav-link">Deployer</a></li><li class="dropdown-subitem"><a href="/awesome/linux/sentry-auto.html" class="nav-link">Sentry 部署</a></li><li class="dropdown-subitem"><a href="/awesome/linux/sentry-auto-notice-error.html" class="nav-link">Sentry 异常提醒</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/awesome/leetcode/" class="nav-link">Leetcode</a></div> <a href="https://github.com/Just008/awesome" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Mysql 学习</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/awesome/backend/sql/mysql/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/awesome/backend/sql/mysql/index-base.html" class="sidebar-link">索引知识</a></li><li><a href="/awesome/backend/sql/mysql/join.html" class="sidebar-link">Join 学习总结</a></li><li><a href="/awesome/backend/sql/mysql/mysql-1000.html" aria-current="page" class="active sidebar-link">一千行 MySQL 学习笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#windows服务" class="sidebar-link">Windows服务</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#连接与断开服务器" class="sidebar-link">连接与断开服务器</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#数据库操作" class="sidebar-link">数据库操作</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#表的操作" class="sidebar-link">表的操作</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#数据操作" class="sidebar-link">数据操作</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#字符集编码" class="sidebar-link">字符集编码</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#数据类型（列类型）" class="sidebar-link">数据类型（列类型）</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#选择类型" class="sidebar-link">选择类型</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#列属性（列约束）" class="sidebar-link">列属性（列约束）</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#建表规范" class="sidebar-link">建表规范</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#select" class="sidebar-link">SELECT</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#union" class="sidebar-link">UNION</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#连接查询-join" class="sidebar-link">连接查询(join)</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#导出" class="sidebar-link">导出</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#insert" class="sidebar-link">INSERT</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#delete" class="sidebar-link">DELETE</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#truncate" class="sidebar-link">TRUNCATE</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#备份与还原" class="sidebar-link">备份与还原</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#视图" class="sidebar-link">视图</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#事务-transaction" class="sidebar-link">事务(transaction)</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#锁表" class="sidebar-link">锁表</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#触发器" class="sidebar-link">触发器</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#sql编程" class="sidebar-link">SQL编程</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#用户和权限管理" class="sidebar-link">用户和权限管理</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#表维护" class="sidebar-link">表维护</a></li><li class="sidebar-sub-header"><a href="/awesome/backend/sql/mysql/mysql-1000.html#杂项" class="sidebar-link">杂项</a></li></ul></li><li><a href="/awesome/backend/sql/mysql/z-interview.html" class="sidebar-link">面试基础知识</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="一千行-mysql-学习笔记"><a href="#一千行-mysql-学习笔记" class="header-anchor">#</a> 一千行 MySQL 学习笔记</h1> <blockquote><p>作者：Shocker</p> <p>链接：<a href="https://shockerli.net/post/1000-line-mysql-note/" target="_blank" rel="noopener noreferrer">https://shockerli.net/post/1000-line-mysql-note/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="windows服务"><a href="#windows服务" class="header-anchor">#</a> Windows服务</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>-- 启动MySQL
    net start mysql
-- 创建Windows服务
    sc create mysql <span class="token assign-left variable">binPath</span><span class="token operator">=</span> mysqld_bin_path<span class="token punctuation">(</span>注意：等号与值之间有空格<span class="token punctuation">)</span>
</code></pre></div><h2 id="连接与断开服务器"><a href="#连接与断开服务器" class="header-anchor">#</a> 连接与断开服务器</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>mysql -h 地址 -P 端口 -u 用户名 -p 密码

SHOW PROCESSLIST -- 显示哪些线程正在运行
SHOW VARIABLES -- 显示系统变量信息
</code></pre></div><h2 id="数据库操作"><a href="#数据库操作" class="header-anchor">#</a> 数据库操作</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>-- 查看当前数据库
    SELECT DATABASE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
-- 显示当前时间、用户名、数据库版本
    SELECT now<span class="token punctuation">(</span><span class="token punctuation">)</span>, user<span class="token punctuation">(</span><span class="token punctuation">)</span>, version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
-- 创建库
    CREATE DATABASE<span class="token punctuation">[</span> IF NOT EXISTS<span class="token punctuation">]</span> 数据库名 数据库选项
    数据库选项：
        CHARACTER SET charset_name
        COLLATE collation_name
-- 查看已有库
    SHOW DATABASES<span class="token punctuation">[</span> LIKE <span class="token string">'PATTERN'</span><span class="token punctuation">]</span>
-- 查看当前库信息
    SHOW CREATE DATABASE 数据库名
-- 修改库的选项信息
    ALTER DATABASE 库名 选项信息
-- 删除库
    DROP DATABASE<span class="token punctuation">[</span> IF EXISTS<span class="token punctuation">]</span> 数据库名
        同时删除该数据库相关的目录及其目录内容
</code></pre></div><h2 id="表的操作"><a href="#表的操作" class="header-anchor">#</a> 表的操作</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>-- 创建表
    CREATE <span class="token punctuation">[</span>TEMPORARY<span class="token punctuation">]</span> TABLE<span class="token punctuation">[</span> IF NOT EXISTS<span class="token punctuation">]</span> <span class="token punctuation">[</span>库名.<span class="token punctuation">]</span>表名 <span class="token punctuation">(</span> 表的结构定义 <span class="token punctuation">)</span><span class="token punctuation">[</span> 表选项<span class="token punctuation">]</span>
        每个字段必须有数据类型
        最后一个字段后不能有逗号
        TEMPORARY 临时表，会话结束时表自动消失
        对于字段的定义：
            字段名 数据类型 <span class="token punctuation">[</span>NOT NULL <span class="token operator">|</span> NULL<span class="token punctuation">]</span> <span class="token punctuation">[</span>DEFAULT default_value<span class="token punctuation">]</span> <span class="token punctuation">[</span>AUTO_INCREMENT<span class="token punctuation">]</span> <span class="token punctuation">[</span>UNIQUE <span class="token punctuation">[</span>KEY<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span>PRIMARY<span class="token punctuation">]</span> KEY<span class="token punctuation">]</span> <span class="token punctuation">[</span>COMMENT <span class="token string">'string'</span><span class="token punctuation">]</span>
-- 表选项
    -- 字符集
        CHARSET <span class="token operator">=</span> charset_name
        如果表没有设定，则使用数据库字符集
    -- 存储引擎
        ENGINE <span class="token operator">=</span> engine_name
        表在管理数据时采用的不同的数据结构，结构不同会导致处理方式、提供的特性操作等不同
        常见的引擎：InnoDB MyISAM Memory/Heap BDB Merge Example CSV MaxDB Archive
        不同的引擎在保存表的结构和数据时采用不同的方式
        MyISAM表文件含义：.frm表定义，.MYD表数据，.MYI表索引
        InnoDB表文件含义：.frm表定义，表空间数据和日志文件
        SHOW ENGINES -- 显示存储引擎的状态信息
        SHOW ENGINE 引擎名 <span class="token punctuation">{</span>LOGS<span class="token operator">|</span>STATUS<span class="token punctuation">}</span> -- 显示存储引擎的日志或状态信息
    -- 自增起始数
        AUTO_INCREMENT <span class="token operator">=</span> 行数
    -- 数据文件目录
        DATA DIRECTORY <span class="token operator">=</span> <span class="token string">'目录'</span>
    -- 索引文件目录
        INDEX DIRECTORY <span class="token operator">=</span> <span class="token string">'目录'</span>
    -- 表注释
        COMMENT <span class="token operator">=</span> <span class="token string">'string'</span>
    -- 分区选项
        PARTITION BY <span class="token punctuation">..</span>. <span class="token punctuation">(</span>详细见手册<span class="token punctuation">)</span>
-- 查看所有表
    SHOW TABLES<span class="token punctuation">[</span> LIKE <span class="token string">'pattern'</span><span class="token punctuation">]</span>
    SHOW TABLES FROM 库名
-- 查看表机构
    SHOW CREATE TABLE 表名 （信息更详细）
    DESC 表名 / DESCRIBE 表名 / EXPLAIN 表名 / SHOW <span class="token environment constant">COLUMNS</span> FROM 表名 <span class="token punctuation">[</span>LIKE <span class="token string">'PATTERN'</span><span class="token punctuation">]</span>
    SHOW TABLE STATUS <span class="token punctuation">[</span>FROM db_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>LIKE <span class="token string">'pattern'</span><span class="token punctuation">]</span>
-- 修改表
    -- 修改表本身的选项
        ALTER TABLE 表名 表的选项
        eg: ALTER TABLE 表名 <span class="token assign-left variable">ENGINE</span><span class="token operator">=</span>MYISAM<span class="token punctuation">;</span>
    -- 对表进行重命名
        RENAME TABLE 原表名 TO 新表名
        RENAME TABLE 原表名 TO 库名.表名 （可将表移动到另一个数据库）
        -- RENAME可以交换两个表名
    -- 修改表的字段机构（13.1.2. ALTER TABLE语法）
        ALTER TABLE 表名 操作名
        -- 操作名
            ADD<span class="token punctuation">[</span> COLUMN<span class="token punctuation">]</span> 字段定义       -- 增加字段
                AFTER 字段名          -- 表示增加在该字段名后面
                FIRST               -- 表示增加在第一个
            ADD PRIMARY KEY<span class="token punctuation">(</span>字段名<span class="token punctuation">)</span>   -- 创建主键
            ADD UNIQUE <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段名<span class="token punctuation">)</span>-- 创建唯一索引
            ADD INDEX <span class="token punctuation">[</span>索引名<span class="token punctuation">]</span> <span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> -- 创建普通索引
            DROP<span class="token punctuation">[</span> COLUMN<span class="token punctuation">]</span> 字段名      -- 删除字段
            MODIFY<span class="token punctuation">[</span> COLUMN<span class="token punctuation">]</span> 字段名 字段属性     -- 支持对字段属性进行修改，不能修改字段名<span class="token punctuation">(</span>所有原有属性也需写上<span class="token punctuation">)</span>
            CHANGE<span class="token punctuation">[</span> COLUMN<span class="token punctuation">]</span> 原字段名 新字段名 字段属性      -- 支持对字段名修改
            DROP PRIMARY KEY    -- 删除主键<span class="token punctuation">(</span>删除主键前需删除其AUTO_INCREMENT属性<span class="token punctuation">)</span>
            DROP INDEX 索引名 -- 删除索引
            DROP FOREIGN KEY 外键    -- 删除外键
-- 删除表
    DROP TABLE<span class="token punctuation">[</span> IF EXISTS<span class="token punctuation">]</span> 表名 <span class="token punctuation">..</span>.
-- 清空表数据
    TRUNCATE <span class="token punctuation">[</span>TABLE<span class="token punctuation">]</span> 表名
-- 复制表结构
    CREATE TABLE 表名 LIKE 要复制的表名
-- 复制表结构和数据
    CREATE TABLE 表名 <span class="token punctuation">[</span>AS<span class="token punctuation">]</span> SELECT * FROM 要复制的表名
-- 检查表是否有错误
    CHECK TABLE tbl_name <span class="token punctuation">[</span>, tbl_name<span class="token punctuation">]</span> <span class="token punctuation">..</span>. <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
-- 优化表
    OPTIMIZE <span class="token punctuation">[</span>LOCAL <span class="token operator">|</span> NO_WRITE_TO_BINLOG<span class="token punctuation">]</span> TABLE tbl_name <span class="token punctuation">[</span>, tbl_name<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
-- 修复表
    REPAIR <span class="token punctuation">[</span>LOCAL <span class="token operator">|</span> NO_WRITE_TO_BINLOG<span class="token punctuation">]</span> TABLE tbl_name <span class="token punctuation">[</span>, tbl_name<span class="token punctuation">]</span> <span class="token punctuation">..</span>. <span class="token punctuation">[</span>QUICK<span class="token punctuation">]</span> <span class="token punctuation">[</span>EXTENDED<span class="token punctuation">]</span> <span class="token punctuation">[</span>USE_FRM<span class="token punctuation">]</span>
-- 分析表
    ANALYZE <span class="token punctuation">[</span>LOCAL <span class="token operator">|</span> NO_WRITE_TO_BINLOG<span class="token punctuation">]</span> TABLE tbl_name <span class="token punctuation">[</span>, tbl_name<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
</code></pre></div><h2 id="数据操作"><a href="#数据操作" class="header-anchor">#</a> 数据操作</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>-- 增
    INSERT <span class="token punctuation">[</span>INTO<span class="token punctuation">]</span> 表名 <span class="token punctuation">[</span><span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span><span class="token punctuation">]</span> VALUES <span class="token punctuation">(</span>值列表<span class="token punctuation">)</span><span class="token punctuation">[</span>, <span class="token punctuation">(</span>值列表<span class="token punctuation">)</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
        -- 如果要插入的值列表包含所有字段并且顺序一致，则可以省略字段列表。
        -- 可同时插入多条数据记录！
        REPLACE 与 INSERT 完全一样，可互换。
    INSERT <span class="token punctuation">[</span>INTO<span class="token punctuation">]</span> 表名 SET 字段名<span class="token operator">=</span>值<span class="token punctuation">[</span>, 字段名<span class="token operator">=</span>值, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
-- 查
    SELECT 字段列表 FROM 表名<span class="token punctuation">[</span> 其他子句<span class="token punctuation">]</span>
        -- 可来自多个表的多个字段
        -- 其他子句可以不使用
        -- 字段列表可以用*代替，表示所有字段
-- 删
    DELETE FROM 表名<span class="token punctuation">[</span> 删除条件子句<span class="token punctuation">]</span>
        没有条件子句，则会删除全部
-- 改
    UPDATE 表名 SET 字段名<span class="token operator">=</span>新值<span class="token punctuation">[</span>, 字段名<span class="token operator">=</span>新值<span class="token punctuation">]</span> <span class="token punctuation">[</span>更新条件<span class="token punctuation">]</span>
</code></pre></div><h2 id="字符集编码"><a href="#字符集编码" class="header-anchor">#</a> 字符集编码</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>-- MySQL、数据库、表、字段均可设置编码
-- 数据编码与客户端编码不需一致
SHOW VARIABLES LIKE <span class="token string">'character_set_%'</span>   -- 查看所有字符集编码项
    character_set_client        客户端向服务器发送数据时使用的编码
    character_set_results       服务器端将结果返回给客户端所使用的编码
    character_set_connection    连接层编码
SET 变量名 <span class="token operator">=</span> 变量值
    SET character_set_client <span class="token operator">=</span> gbk<span class="token punctuation">;</span>
    SET character_set_results <span class="token operator">=</span> gbk<span class="token punctuation">;</span>
    SET character_set_connection <span class="token operator">=</span> gbk<span class="token punctuation">;</span>
SET NAMES GBK<span class="token punctuation">;</span>  -- 相当于完成以上三个设置
-- 校对集
    校对集用以排序
    SHOW CHARACTER SET <span class="token punctuation">[</span>LIKE <span class="token string">'pattern'</span><span class="token punctuation">]</span>/SHOW CHARSET <span class="token punctuation">[</span>LIKE <span class="token string">'pattern'</span><span class="token punctuation">]</span>   查看所有字符集
    SHOW COLLATION <span class="token punctuation">[</span>LIKE <span class="token string">'pattern'</span><span class="token punctuation">]</span>     查看所有校对集
    CHARSET 字符集编码     设置字符集编码
    COLLATE 校对集编码     设置校对集编码
</code></pre></div><h2 id="数据类型（列类型）"><a href="#数据类型（列类型）" class="header-anchor">#</a> 数据类型（列类型）</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>. 数值类型

-- a. 整型 ----------
    类型         字节     范围（有符号位）
    tinyint     <span class="token number">1</span>字节    -128 ~ <span class="token number">127</span>      无符号位：0 ~ <span class="token number">255</span>
    smallint    <span class="token number">2</span>字节    -32768 ~ <span class="token number">32767</span>
    mediumint   <span class="token number">3</span>字节    -8388608 ~ <span class="token number">8388607</span>
    int         <span class="token number">4</span>字节
    bigint      <span class="token number">8</span>字节
    int<span class="token punctuation">(</span>M<span class="token punctuation">)</span>  M表示总位数
    - 默认存在符号位，unsigned 属性修改
    - 显示宽度，如果某个数不够定义字段时设置的位数，则前面以0补填，zerofill 属性修改
        例：int<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>   插入一个数<span class="token string">'123'</span>，补填后为<span class="token string">'00123'</span>
    - 在满足要求的情况下，越小越好。
    - <span class="token number">1</span>表示bool值真，0表示bool值假。MySQL没有布尔类型，通过整型0和1表示。常用tinyint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>表示布尔型。

-- b. 浮点型 ----------
    类型             字节     范围
    float<span class="token punctuation">(</span>单精度<span class="token punctuation">)</span>     <span class="token number">4</span>字节
    double<span class="token punctuation">(</span>双精度<span class="token punctuation">)</span>    <span class="token number">8</span>字节
    浮点型既支持符号位 unsigned 属性，也支持显示宽度 zerofill 属性。
        不同于整型，前后均会补填0.
    定义浮点型时，需指定总位数和小数位数。
        float<span class="token punctuation">(</span>M, D<span class="token punctuation">)</span>     double<span class="token punctuation">(</span>M, D<span class="token punctuation">)</span>
        M表示总位数，D表示小数位数。
        M和D的大小会决定浮点数的范围。不同于整型的固定范围。
        M既表示总位数（不包括小数点和正负号），也表示显示宽度（所有显示符号均包括）。
        支持科学计数法表示。
        浮点数表示近似值。

-- c. 定点数 ----------
    decimal -- 可变长度
    decimal<span class="token punctuation">(</span>M, D<span class="token punctuation">)</span>   M也表示总位数，D表示小数位数。
    保存一个精确的数值，不会发生数据的改变，不同于浮点数的四舍五入。
    将浮点数转换为字符串来保存，每9位数字保存为4个字节。

<span class="token number">2</span>. 字符串类型

-- a. char, varchar ----------
    char    定长字符串，速度快，但浪费空间
    varchar 变长字符串，速度慢，但节省空间
    M表示能存储的最大长度，此长度是字符数，非字节数。
    不同的编码，所占用的空间不同。
    char,最多255个字符，与编码无关。
    varchar,最多65535字符，与编码有关。
    一条有效记录最大不能超过65535个字节。
        utf8 最大为21844个字符，gbk 最大为32766个字符，latin1 最大为65532个字符
    varchar 是变长的，需要利用存储空间保存 varchar 的长度，如果数据小于255个字节，则采用一个字节来保存长度，反之需要两个字节来保存。
    varchar 的最大有效长度由最大行大小和使用的字符集确定。
    最大有效长度是65532字节，因为在varchar存字符串时，第一个字节是空的，不存在任何数据，然后还需两个字节来存放字符串的长度，所以有效长度是64432-1-2<span class="token operator">=</span><span class="token number">65532</span>字节。
    例：若一个表定义为 CREATE TABLE tb<span class="token punctuation">(</span>c1 int, c2 char<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>, c3 varchar<span class="token punctuation">(</span>N<span class="token punctuation">))</span> <span class="token assign-left variable">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span> 问N的最大值是多少？ 答：<span class="token punctuation">(</span><span class="token number">65535</span>-1-2-4-30*3<span class="token punctuation">)</span>/3

-- b. blob, text ----------
    blob 二进制字符串（字节字符串）
        tinyblob, blob, mediumblob, longblob
    text 非二进制字符串（字符字符串）
        tinytext, text, mediumtext, longtext
    text 在定义时，不需要定义长度，也不会计算总长度。
    text 类型在定义时，不可给default值

-- c. binary, varbinary ----------
    类似于char和varchar，用于保存二进制字符串，也就是保存字节字符串而非字符字符串。
    char, varchar, text 对应 binary, varbinary, blob.

<span class="token number">3</span>. 日期时间类型
    一般用整型保存时间戳，因为PHP可以很方便的将时间戳进行格式化。
    datetime    <span class="token number">8</span>字节    日期及时间     <span class="token number">1000</span>-01-01 00:00:00 到 <span class="token number">9999</span>-12-31 <span class="token number">23</span>:59:59
    <span class="token function">date</span>        <span class="token number">3</span>字节    日期         <span class="token number">1000</span>-01-01 到 <span class="token number">9999</span>-12-31
    timestamp   <span class="token number">4</span>字节    时间戳        <span class="token number">19700101000000</span> 到 <span class="token number">2038</span>-01-19 03:14:07
    <span class="token function">time</span>        <span class="token number">3</span>字节    时间         -838:59:59 到 <span class="token number">838</span>:59:59
    year        <span class="token number">1</span>字节    年份         <span class="token number">1901</span> - <span class="token number">2155</span>
datetime    YYYY-MM-DD hh:mm:ss
timestamp   YY-MM-DD hh:mm:ss
            YYYYMMDDhhmmss
            YYMMDDhhmmss
            YYYYMMDDhhmmss
            YYMMDDhhmmss
<span class="token function">date</span>        YYYY-MM-DD
            YY-MM-DD
            YYYYMMDD
            YYMMDD
            YYYYMMDD
            YYMMDD
<span class="token function">time</span>        hh:mm:ss
            hhmmss
            hhmmss
year        YYYY
            YY
            YYYY
            YY

<span class="token number">4</span>. 枚举和集合

-- 枚举<span class="token punctuation">(</span>enum<span class="token punctuation">)</span> ----------
enum<span class="token punctuation">(</span>val1, val2, val3<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
    在已知的值中进行单选。最大数量为65535.
    枚举值在保存时，以2个字节的整型<span class="token punctuation">(</span>smallint<span class="token punctuation">)</span>保存。每个枚举值，按保存的位置顺序，从1开始逐一递增。
    表现为字符串类型，存储却是整型。
    NULL值的索引是NULL。
    空字符串错误值的索引值是0。


-- 集合（set） ----------
set<span class="token punctuation">(</span>val1, val2, val3<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
    create table tab <span class="token punctuation">(</span> gender set<span class="token punctuation">(</span><span class="token string">'男'</span>, <span class="token string">'女'</span>, <span class="token string">'无'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    insert into tab values <span class="token punctuation">(</span><span class="token string">'男, 女'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    最多可以有64个不同的成员。以bigint存储，共8个字节。采取位运算的形式。
    当创建表时，SET成员值的尾部空格将自动被删除。
</code></pre></div><h2 id="选择类型"><a href="#选择类型" class="header-anchor">#</a> 选择类型</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>-- PHP角度
<span class="token number">1</span>. 功能满足
<span class="token number">2</span>. 存储空间尽量小，处理效率更高
<span class="token number">3</span>. 考虑兼容问题

-- IP存储 ----------
<span class="token number">1</span>. 只需存储，可用字符串
<span class="token number">2</span>. 如果需计算，查找等，可存储为4个字节的无符号int，即unsigned
    <span class="token number">1</span><span class="token punctuation">)</span> PHP函数转换
        ip2long可转换为整型，但会出现携带符号问题。需格式化为无符号的整型。
        利用sprintf函数格式化字符串
        sprintf<span class="token punctuation">(</span><span class="token string">&quot;%u&quot;</span>, ip2long<span class="token punctuation">(</span><span class="token string">'192.168.3.134'</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        然后用long2ip将整型转回IP字符串
    <span class="token number">2</span><span class="token punctuation">)</span> MySQL函数转换<span class="token punctuation">(</span>无符号整型，UNSIGNED<span class="token punctuation">)</span>
        INET_ATON<span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span> 将IP转为整型
        INET_NTOA<span class="token punctuation">(</span><span class="token number">2130706433</span><span class="token punctuation">)</span> 将整型转为IP
</code></pre></div><h2 id="列属性（列约束）"><a href="#列属性（列约束）" class="header-anchor">#</a> 列属性（列约束）</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>. PRIMARY 主键
    - 能唯一标识记录的字段，可以作为主键。
    - 一个表只能有一个主键。
    - 主键具有唯一性。
    - 声明字段时，用 primary key 标识。
        也可以在字段列表之后声明
            例：create table tab <span class="token punctuation">(</span> <span class="token function">id</span> int, stu varchar<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>, primary key <span class="token punctuation">(</span>id<span class="token punctuation">))</span><span class="token punctuation">;</span>
    - 主键字段的值不能为null。
    - 主键可以由多个字段共同组成。此时需要在字段列表后声明的方法。
        例：create table tab <span class="token punctuation">(</span> <span class="token function">id</span> int, stu varchar<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>, age int, primary key <span class="token punctuation">(</span>stu, age<span class="token punctuation">))</span><span class="token punctuation">;</span>
<span class="token number">2</span>. UNIQUE 唯一索引（唯一约束）
    使得某字段的值也不能重复。
<span class="token number">3</span>. NULL 约束
    null不是数据类型，是列的一个属性。
    表示当前列是否可以为null，表示什么都没有。
    null, 允许为空。默认。
    not null, 不允许为空。
    insert into tab values <span class="token punctuation">(</span>null, <span class="token string">'val'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        -- 此时表示将第一个字段的值设为null, 取决于该字段是否允许为null
<span class="token number">4</span>. DEFAULT 默认值属性
    当前字段的默认值。
    insert into tab values <span class="token punctuation">(</span>default, <span class="token string">'val'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    -- 此时表示强制使用默认值。
    create table tab <span class="token punctuation">(</span> add_time timestamp default current_timestamp <span class="token punctuation">)</span><span class="token punctuation">;</span>
        -- 表示将当前时间的时间戳设为默认值。
        current_date, current_time
<span class="token number">5</span>. AUTO_INCREMENT 自动增长约束
    自动增长必须为索引（主键或unique）
    只能存在一个字段为自动增长。
    默认为1开始自动增长。可以通过表属性 auto_increment <span class="token operator">=</span> x进行设置，或 alter table tbl auto_increment <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token number">6</span>. COMMENT 注释
    例：create table tab <span class="token punctuation">(</span> <span class="token function">id</span> int <span class="token punctuation">)</span> comment <span class="token string">'注释内容'</span><span class="token punctuation">;</span>
<span class="token number">7</span>. FOREIGN KEY 外键约束
    用于限制主表与从表数据完整性。
    alter table t1 <span class="token function">add</span> constraint <span class="token variable"><span class="token variable">`</span>t1_t2_fk<span class="token variable">`</span></span> foreign key <span class="token punctuation">(</span>t1_id<span class="token punctuation">)</span> references t2<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        -- 将表t1的t1_id外键关联到表t2的id字段。
        -- 每个外键都有一个名字，可以通过 constraint 指定
    存在外键的表，称之为从表（子表），外键指向的表，称之为主表（父表）。
    作用：保持数据一致性，完整性，主要目的是控制存储在外键表（从表）中的数据。
    MySQL中，可以对InnoDB引擎使用外键约束：
    语法：
    foreign key <span class="token punctuation">(</span>外键字段） references 主表名 <span class="token punctuation">(</span>关联字段<span class="token punctuation">)</span> <span class="token punctuation">[</span>主表记录删除时的动作<span class="token punctuation">]</span> <span class="token punctuation">[</span>主表记录更新时的动作<span class="token punctuation">]</span>
    此时需要检测一个从表的外键需要约束为主表的已存在的值。外键在没有关联的情况下，可以设置为null.前提是该外键列，没有not null。
    可以不指定主表记录更改或更新时的动作，那么此时主表的操作被拒绝。
    如果指定了 on update 或 on delete：在删除或更新时，有如下几个操作可以选择：
    <span class="token number">1</span>. cascade，级联操作。主表数据被更新（主键值更新），从表也被更新（外键值更新）。主表记录被删除，从表相关记录也被删除。
    <span class="token number">2</span>. <span class="token builtin class-name">set</span> null，设置为null。主表数据被更新（主键值更新），从表的外键被设置为null。主表记录被删除，从表相关记录外键被设置成null。但注意，要求该外键列，没有not null属性约束。
    <span class="token number">3</span>. restrict，拒绝父表删除和更新。
    注意，外键只被InnoDB存储引擎所支持。其他引擎是不支持的。
</code></pre></div><h2 id="建表规范"><a href="#建表规范" class="header-anchor">#</a> 建表规范</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>    -- Normal Format, NF
        - 每个表保存一个实体信息
        - 每个具有一个ID字段作为主键
        - ID主键 + 原子表
    -- 1NF, 第一范式
        字段不能再分，就满足第一范式。
    -- 2NF, 第二范式
        满足第一范式的前提下，不能出现部分依赖。
        消除符合主键就可以避免部分依赖。增加单列关键字。
    -- 3NF, 第三范式
        满足第二范式的前提下，不能出现传递依赖。
        某个字段依赖于主键，而有其他字段依赖于该字段。这就是传递依赖。
        将一个实体信息的数据放在一个表内实现。
</code></pre></div><h2 id="select"><a href="#select" class="header-anchor">#</a> SELECT</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT <span class="token punctuation">[</span>ALL<span class="token operator">|</span>DISTINCT<span class="token punctuation">]</span> select_expr FROM -<span class="token operator">&gt;</span> WHERE -<span class="token operator">&gt;</span> GROUP BY <span class="token punctuation">[</span>合计函数<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> HAVING -<span class="token operator">&gt;</span> ORDER BY -<span class="token operator">&gt;</span> LIMIT
a. select_expr
    -- 可以用 * 表示所有字段。
        <span class="token keyword">select</span> * from tb<span class="token punctuation">;</span>
    -- 可以使用表达式（计算公式、函数调用、字段也是个表达式）
        <span class="token keyword">select</span> stu, <span class="token number">29</span>+25, now<span class="token punctuation">(</span><span class="token punctuation">)</span> from tb<span class="token punctuation">;</span>
    -- 可以为每个列使用别名。适用于简化列标识，避免多个列标识符重复。
        - 使用 as 关键字，也可省略 as.
        <span class="token keyword">select</span> stu+10 as add10 from tb<span class="token punctuation">;</span>
b. FROM 子句
    用于标识查询来源。
    -- 可以为表起别名。使用as关键字。
        SELECT * FROM tb1 AS tt, tb2 AS bb<span class="token punctuation">;</span>
    -- from子句后，可以同时出现多个表。
        -- 多个表会横向叠加到一起，而数据会形成一个笛卡尔积。
        SELECT * FROM tb1, tb2<span class="token punctuation">;</span>
    -- 向优化符提示如何选择索引
        USE INDEX、IGNORE INDEX、FORCE INDEX
        SELECT * FROM table1 USE INDEX <span class="token punctuation">(</span>key1,key2<span class="token punctuation">)</span> WHERE <span class="token assign-left variable">key1</span><span class="token operator">=</span><span class="token number">1</span> AND <span class="token assign-left variable">key2</span><span class="token operator">=</span><span class="token number">2</span> AND <span class="token assign-left variable">key3</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
        SELECT * FROM table1 IGNORE INDEX <span class="token punctuation">(</span>key3<span class="token punctuation">)</span> WHERE <span class="token assign-left variable">key1</span><span class="token operator">=</span><span class="token number">1</span> AND <span class="token assign-left variable">key2</span><span class="token operator">=</span><span class="token number">2</span> AND <span class="token assign-left variable">key3</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
c. WHERE 子句
    -- 从from获得的数据源中进行筛选。
    -- 整型1表示真，0表示假。
    -- 表达式由运算符和运算数组成。
        -- 运算数：变量（字段）、值、函数返回值
        -- 运算符：
            <span class="token operator">=</span>, <span class="token operator">&lt;=</span><span class="token operator">&gt;</span>, <span class="token operator">&lt;&gt;</span>, <span class="token operator">!=</span>, <span class="token operator">&lt;=</span>, <span class="token operator">&lt;</span>, <span class="token operator">&gt;=</span>, <span class="token operator">&gt;</span>, <span class="token operator">!</span>, <span class="token operator">&amp;&amp;</span>, <span class="token operator">||</span>,
            <span class="token keyword">in</span> <span class="token punctuation">(</span>not<span class="token punctuation">)</span> null, <span class="token punctuation">(</span>not<span class="token punctuation">)</span> like, <span class="token punctuation">(</span>not<span class="token punctuation">)</span> in, <span class="token punctuation">(</span>not<span class="token punctuation">)</span> between and, is <span class="token punctuation">(</span>not<span class="token punctuation">)</span>, and, or, not, xor
            is/is not 加上ture/false/unknown，检验某个值的真假
            <span class="token operator">&lt;=</span><span class="token operator">&gt;</span>与<span class="token operator">&lt;&gt;</span>功能相同，<span class="token operator">&lt;=</span><span class="token operator">&gt;</span>可用于null比较
d. GROUP BY 子句, 分组子句
    GROUP BY 字段/别名 <span class="token punctuation">[</span>排序方式<span class="token punctuation">]</span>
    分组后会进行排序。升序：ASC，降序：DESC
    以下<span class="token punctuation">[</span>合计函数<span class="token punctuation">]</span>需配合 GROUP BY 使用：
    count 返回不同的非NULL值数目  count<span class="token punctuation">(</span>*<span class="token punctuation">)</span>、count<span class="token punctuation">(</span>字段<span class="token punctuation">)</span>
    <span class="token function">sum</span> 求和
    max 求最大值
    min 求最小值
    avg 求平均值
    group_concat 返回带有来自一个组的连接的非NULL值的字符串结果。组内字符串连接。
e. HAVING 子句，条件子句
    与 where 功能、用法相同，执行时机不同。
    where 在开始时执行检测数据，对原数据进行过滤。
    having 对筛选出的结果再次进行过滤。
    having 字段必须是查询出来的，where 字段必须是数据表存在的。
    where 不可以使用字段的别名，having 可以。因为执行WHERE代码时，可能尚未确定列值。
    where 不可以使用合计函数。一般需用合计函数才会用 having
    SQL标准要求HAVING必须引用GROUP BY子句中的列或用于合计函数中的列。
f. ORDER BY 子句，排序子句
    order by 排序字段/别名 排序方式 <span class="token punctuation">[</span>,排序字段/别名 排序方式<span class="token punctuation">]</span><span class="token punctuation">..</span>.
    升序：ASC，降序：DESC
    支持多个字段的排序。
g. LIMIT 子句，限制结果数量子句
    仅对处理好的结果进行数量限制。将处理好的结果的看作是一个集合，按照记录出现的顺序，索引从0开始。
    limit 起始位置, 获取条数
    省略第一个参数，表示从索引0开始。limit 获取条数
h. DISTINCT, ALL 选项
    distinct 去除重复记录
    默认为 all, 全部记录
</code></pre></div><h2 id="union"><a href="#union" class="header-anchor">#</a> UNION</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>    将多个select查询的结果组合成一个结果集合。
    SELECT <span class="token punctuation">..</span>. UNION <span class="token punctuation">[</span>ALL<span class="token operator">|</span>DISTINCT<span class="token punctuation">]</span> SELECT <span class="token punctuation">..</span>.
    默认 DISTINCT 方式，即所有返回的行都是唯一的
    建议，对每个SELECT查询加上小括号包裹。
    ORDER BY 排序时，需加上 LIMIT 进行结合。
    需要各select查询的字段数量一样。
    每个select查询的字段列表<span class="token punctuation">(</span>数量、类型<span class="token punctuation">)</span>应一致，因为结果中的字段名以第一条select语句为准。
</code></pre></div><h2 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>    - 子查询需用括号包裹。
-- from型
    from后要求是一个表，必须给子查询结果取个别名。
    - 简化每个查询内的条件。
    - from型需将结果生成一个临时表格，可用以原表的锁定的释放。
    - 子查询返回一个表，表型子查询。
    <span class="token keyword">select</span> * from <span class="token punctuation">(</span>select * from tb where id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> as subfrom where id<span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">;</span>
-- where型
    - 子查询返回一个值，标量子查询。
    - 不需要给子查询取别名。
    - where子查询内的表，不能直接用以更新。
    <span class="token keyword">select</span> * from tb where money <span class="token operator">=</span> <span class="token punctuation">(</span>select max<span class="token punctuation">(</span>money<span class="token punctuation">)</span> from tb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    -- 列子查询
        如果子查询结果返回的是一列。
        使用 <span class="token keyword">in</span> 或 not <span class="token keyword">in</span> 完成查询
        exists 和 not exists 条件
            如果子查询返回数据，则返回1或0。常用于判断条件。
            <span class="token keyword">select</span> column1 from t1 where exists <span class="token punctuation">(</span>select * from t2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    -- 行子查询
        查询条件是一个行。
        <span class="token keyword">select</span> * from t1 where <span class="token punctuation">(</span>id, gender<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token punctuation">(</span>select id, gender from t2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        行构造符：<span class="token punctuation">(</span>col1, col2, <span class="token punctuation">..</span>.<span class="token punctuation">)</span> 或 ROW<span class="token punctuation">(</span>col1, col2, <span class="token punctuation">..</span>.<span class="token punctuation">)</span>
        行构造符通常用于与对能返回两个或两个以上列的子查询进行比较。
    -- 特殊运算符
    <span class="token operator">!=</span> all<span class="token punctuation">(</span><span class="token punctuation">)</span>    相当于 not <span class="token keyword">in</span>
    <span class="token operator">=</span> some<span class="token punctuation">(</span><span class="token punctuation">)</span>    相当于 in。any 是 some 的别名
    <span class="token operator">!=</span> some<span class="token punctuation">(</span><span class="token punctuation">)</span>   不等同于 not in，不等于其中某一个。
    all, some 可以配合其他运算符一起使用。
</code></pre></div><h2 id="连接查询-join"><a href="#连接查询-join" class="header-anchor">#</a> 连接查询(join)</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>    将多个表的字段进行连接，可以指定连接条件。
-- 内连接<span class="token punctuation">(</span>inner <span class="token function">join</span><span class="token punctuation">)</span>
    - 默认就是内连接，可省略inner。
    - 只有数据存在时才能发送连接。即连接结果不能出现空行。
    on 表示连接条件。其条件表达式与where类似。也可以省略条件（表示条件永远为真）
    也可用where表示连接条件。
    还有 using, 但需字段名相同。 using<span class="token punctuation">(</span>字段名<span class="token punctuation">)</span>
    -- 交叉连接 cross <span class="token function">join</span>
        即，没有条件的内连接。
        <span class="token keyword">select</span> * from tb1 cross <span class="token function">join</span> tb2<span class="token punctuation">;</span>
-- 外连接<span class="token punctuation">(</span>outer <span class="token function">join</span><span class="token punctuation">)</span>
    - 如果数据不存在，也会出现在连接结果中。
    -- 左外连接 left <span class="token function">join</span>
        如果数据不存在，左表记录会出现，而右表为null填充
    -- 右外连接 right <span class="token function">join</span>
        如果数据不存在，右表记录会出现，而左表为null填充
-- 自然连接<span class="token punctuation">(</span>natural <span class="token function">join</span><span class="token punctuation">)</span>
    自动判断连接条件完成连接。
    相当于省略了using，会自动查找相同字段名。
    natural <span class="token function">join</span>
    natural left <span class="token function">join</span>
    natural right <span class="token function">join</span>
    
<span class="token keyword">select</span> info.id, info.name, info.stu_num, extra_info.hobby, extra_info.sex from info, extra_info where info.stu_num <span class="token operator">=</span> extra_info.stu_id<span class="token punctuation">;</span>
</code></pre></div><h2 id="导出"><a href="#导出" class="header-anchor">#</a> 导出</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> * into outfile 文件地址 <span class="token punctuation">[</span>控制格式<span class="token punctuation">]</span> from 表名<span class="token punctuation">;</span>   -- 导出表数据

load data <span class="token punctuation">[</span>local<span class="token punctuation">]</span> infile 文件地址 <span class="token punctuation">[</span>replace<span class="token operator">|</span>ignore<span class="token punctuation">]</span> into table 表名 <span class="token punctuation">[</span>控制格式<span class="token punctuation">]</span><span class="token punctuation">;</span> -- 导入数据
    生成的数据默认的分隔符是制表符
    local未指定，则数据文件必须在服务器上
    replace 和 ignore 关键词控制对现有的唯一键记录的重复的处理
-- 控制格式
fields  控制字段格式
默认：fields terminated by <span class="token string">''</span> enclosed by <span class="token string">''</span> escaped by <span class="token string">''</span>
    terminated by <span class="token string">'string'</span>  -- 终止
    enclosed by <span class="token string">'char'</span>      -- 包裹
    escaped by <span class="token string">'char'</span>       -- 转义
    -- 示例：
        SELECT a,b,a+b INTO OUTFILE <span class="token string">'/tmp/result.text'</span>
        FIELDS TERMINATED BY <span class="token string">','</span> OPTIONALLY ENCLOSED BY <span class="token string">'&quot;'</span>
        <span class="token environment constant">LINES</span> TERMINATED BY <span class="token string">''</span>
        FROM test_table<span class="token punctuation">;</span>
lines   控制行格式
默认：lines terminated by <span class="token string">''</span>
    terminated by <span class="token string">'string'</span>  -- 终止
</code></pre></div><h2 id="insert"><a href="#insert" class="header-anchor">#</a> INSERT</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>select语句获得的数据可以用insert插入。
可以省略对列的指定，要求 values <span class="token punctuation">(</span><span class="token punctuation">)</span> 括号内，提供给了按照列顺序出现的所有字段的值。
    或者使用set语法。
    INSERT INTO tbl_name SET <span class="token assign-left variable">field</span><span class="token operator">=</span>value,<span class="token punctuation">..</span>.；
可以一次性使用多个值，采用<span class="token punctuation">(</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>的形式。
    INSERT INTO tbl_name VALUES <span class="token punctuation">(</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
可以在列值指定时，使用表达式。
    INSERT INTO tbl_name VALUES <span class="token punctuation">(</span>field_value, <span class="token number">10</span>+10, now<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
可以使用一个特殊值 DEFAULT，表示该列使用默认值。
    INSERT INTO tbl_name VALUES <span class="token punctuation">(</span>field_value, DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>
可以通过一个查询的结果，作为需要插入的值。
    INSERT INTO tbl_name SELECT <span class="token punctuation">..</span>.<span class="token punctuation">;</span>
可以指定在插入的值出现主键（或唯一索引）冲突时，更新其他非主键列的信息。
    INSERT INTO tbl_name VALUES/SET/SELECT ON DUPLICATE KEY UPDATE 字段<span class="token operator">=</span>值, …<span class="token punctuation">;</span>
</code></pre></div><h2 id="delete"><a href="#delete" class="header-anchor">#</a> DELETE</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>DELETE FROM tbl_name <span class="token punctuation">[</span>WHERE where_definition<span class="token punctuation">]</span> <span class="token punctuation">[</span>ORDER BY <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>LIMIT row_count<span class="token punctuation">]</span>
按照条件删除。where
指定删除的最多记录数。limit
可以通过排序条件删除。order by + limit
支持多表删除，使用类似连接语法。
delete from 需要删除数据多表1，表2 using 表连接操作 条件。
</code></pre></div><h2 id="truncate"><a href="#truncate" class="header-anchor">#</a> TRUNCATE</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>TRUNCATE <span class="token punctuation">[</span>TABLE<span class="token punctuation">]</span> tbl_name
清空数据
删除重建表
区别：
<span class="token number">1</span>，truncate 是删除表再创建，delete 是逐条删除
<span class="token number">2</span>，truncate 重置auto_increment的值。而delete不会
<span class="token number">3</span>，truncate 不知道删除了几条，而delete知道。
<span class="token number">4</span>，当被用于带分区的表时，truncate 会保留分区
</code></pre></div><h2 id="备份与还原"><a href="#备份与还原" class="header-anchor">#</a> 备份与还原</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>备份，将数据的结构与表内数据保存起来。
利用 mysqldump 指令完成。
-- 导出
mysqldump <span class="token punctuation">[</span>options<span class="token punctuation">]</span> db_name <span class="token punctuation">[</span>tables<span class="token punctuation">]</span>
mysqldump <span class="token punctuation">[</span>options<span class="token punctuation">]</span> ---database DB1 <span class="token punctuation">[</span>DB2 DB3<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
mysqldump <span class="token punctuation">[</span>options<span class="token punctuation">]</span> --all--database
<span class="token number">1</span>. 导出一张表
　　mysqldump -u用户名 -p密码 库名 表名 <span class="token operator">&gt;</span> 文件名<span class="token punctuation">(</span>D:/a.sql<span class="token punctuation">)</span>
<span class="token number">2</span>. 导出多张表
　　mysqldump -u用户名 -p密码 库名 表1 表2 表3 <span class="token operator">&gt;</span> 文件名<span class="token punctuation">(</span>D:/a.sql<span class="token punctuation">)</span>
<span class="token number">3</span>. 导出所有表
　　mysqldump -u用户名 -p密码 库名 <span class="token operator">&gt;</span> 文件名<span class="token punctuation">(</span>D:/a.sql<span class="token punctuation">)</span>
<span class="token number">4</span>. 导出一个库
　　mysqldump -u用户名 -p密码 --lock-all-tables --database 库名 <span class="token operator">&gt;</span> 文件名<span class="token punctuation">(</span>D:/a.sql<span class="token punctuation">)</span>
可以-w携带WHERE条件
-- 导入
<span class="token number">1</span>. 在登录mysql的情况下：
　　<span class="token builtin class-name">source</span>  备份文件
<span class="token number">2</span>. 在不登录的情况下
　　mysql -u用户名 -p密码 库名 <span class="token operator">&lt;</span> 备份文件
</code></pre></div><h2 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>什么是视图：
    视图是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含一系列带有名称的列和行数据。但是，视图并不在数据库中以存储的数据值集形式存在。行和列数据来自由定义视图的查询所引用的表，并且在引用视图时动态生成。
    视图具有表结构文件，但不存在数据文件。
    对其中所引用的基础表来说，视图的作用类似于筛选。定义视图的筛选可以来自当前或其它数据库的一个或多个表，或者其它视图。通过视图进行查询没有任何限制，通过它们进行数据修改时的限制也很少。
    视图是存储在数据库中的查询的sql语句，它主要出于两种原因：安全原因，视图可以隐藏一些数据，如：社会保险基金表，可以用视图只显示姓名，地址，而不显示社会保险号和工资数等，另一原因是可使复杂的查询易于理解和使用。
-- 创建视图
CREATE <span class="token punctuation">[</span>OR REPLACE<span class="token punctuation">]</span> <span class="token punctuation">[</span>ALGORITHM <span class="token operator">=</span> <span class="token punctuation">{</span>UNDEFINED <span class="token operator">|</span> MERGE <span class="token operator">|</span> TEMPTABLE<span class="token punctuation">}</span><span class="token punctuation">]</span> VIEW view_name <span class="token punctuation">[</span><span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">]</span> AS select_statement
    - 视图名必须唯一，同时不能与表重名。
    - 视图可以使用select语句查询到的列名，也可以自己指定相应的列名。
    - 可以指定视图执行的算法，通过ALGORITHM指定。
    - column_list如果存在，则数目必须等于SELECT语句检索的列数
-- 查看结构
    SHOW CREATE VIEW view_name
-- 删除视图
    - 删除视图后，数据依然存在。
    - 可同时删除多个视图。
    DROP VIEW <span class="token punctuation">[</span>IF EXISTS<span class="token punctuation">]</span> view_name <span class="token punctuation">..</span>.
-- 修改视图结构
    - 一般不修改视图，因为不是所有的更新视图都会映射到表上。
    ALTER VIEW view_name <span class="token punctuation">[</span><span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">]</span> AS select_statement
-- 视图作用
    <span class="token number">1</span>. 简化业务逻辑
    <span class="token number">2</span>. 对客户端隐藏真实的表结构
-- 视图算法<span class="token punctuation">(</span>ALGORITHM<span class="token punctuation">)</span>
    MERGE       合并
        将视图的查询语句，与外部查询需要先合并再执行！
    TEMPTABLE   临时表
        将视图执行完毕后，形成临时表，再做外层查询！
    UNDEFINED   未定义<span class="token punctuation">(</span>默认<span class="token punctuation">)</span>，指的是MySQL自主去选择相应的算法。
</code></pre></div><h2 id="事务-transaction"><a href="#事务-transaction" class="header-anchor">#</a> 事务(transaction)</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>事务是指逻辑上的一组操作，组成这组操作的各个单元，要不全成功要不全失败。
    - 支持连续SQL的集体成功或集体撤销。
    - 事务是数据库在数据晚自习方面的一个功能。
    - 需要利用 InnoDB 或 BDB 存储引擎，对自动提交的特性支持完成。
    - InnoDB被称为事务安全型引擎。
-- 事务开启
    START TRANSACTION<span class="token punctuation">;</span> 或者 BEGIN<span class="token punctuation">;</span>
    开启事务后，所有被执行的SQL语句均被认作当前事务内的SQL语句。
-- 事务提交
    COMMIT<span class="token punctuation">;</span>
-- 事务回滚
    ROLLBACK<span class="token punctuation">;</span>
    如果部分操作发生问题，映射到事务开启前。
-- 事务的特性
    <span class="token number">1</span>. 原子性（Atomicity）
        事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。
    <span class="token number">2</span>. 一致性（Consistency）
        事务前后数据的完整性必须保持一致。
        - 事务开始和结束时，外部数据一致
        - 在整个事务过程中，操作是连续的
    <span class="token number">3</span>. 隔离性（Isolation）
        多个用户并发访问数据库时，一个用户的事务不能被其它用户的事物所干扰，多个并发事务之间的数据要相互隔离。
    <span class="token number">4</span>. 持久性（Durability）
        一个事务一旦被提交，它对数据库中的数据改变就是永久性的。
-- 事务的实现
    <span class="token number">1</span>. 要求是事务支持的表类型
    <span class="token number">2</span>. 执行一组相关的操作前开启事务
    <span class="token number">3</span>. 整组操作完成后，都成功，则提交；如果存在失败，选择回滚，则会回到事务开始的备份点。
-- 事务的原理
    利用InnoDB的自动提交<span class="token punctuation">(</span>autocommit<span class="token punctuation">)</span>特性完成。
    普通的MySQL执行语句后，当前的数据提交操作均可被其他客户端可见。
    而事务是暂时关闭“自动提交”机制，需要commit提交持久化数据操作。
-- 注意
    <span class="token number">1</span>. 数据定义语言（DDL）语句不能被回滚，比如创建或取消数据库的语句，和创建、取消或更改表或存储的子程序的语句。
    <span class="token number">2</span>. 事务不能被嵌套
-- 保存点
    SAVEPOINT 保存点名称 -- 设置一个事务保存点
    ROLLBACK TO SAVEPOINT 保存点名称 -- 回滚到保存点
    RELEASE SAVEPOINT 保存点名称 -- 删除保存点
-- InnoDB自动提交特性设置
    SET autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">;</span>   <span class="token number">0</span>表示关闭自动提交，1表示开启自动提交。
    - 如果关闭了，那普通操作的结果对其他客户端也不可见，需要commit提交后才能持久化数据操作。
    - 也可以关闭自动提交来开启事务。但与START TRANSACTION不同的是，
        SET autocommit是永久改变服务器的设置，直到下次再次修改该设置。<span class="token punctuation">(</span>针对当前连接<span class="token punctuation">)</span>
        而START TRANSACTION记录开启前的状态，而一旦事务提交或回滚后就需要再次开启事务。<span class="token punctuation">(</span>针对当前事务<span class="token punctuation">)</span>
</code></pre></div><h2 id="锁表"><a href="#锁表" class="header-anchor">#</a> 锁表</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>表锁定只用于防止其它客户端进行不正当地读取和写入
MyISAM 支持表锁，InnoDB 支持行锁
-- 锁定
    LOCK TABLES tbl_name <span class="token punctuation">[</span>AS alias<span class="token punctuation">]</span>
-- 解锁
    UNLOCK TABLES
</code></pre></div><h2 id="触发器"><a href="#触发器" class="header-anchor">#</a> 触发器</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>触发程序是与表有关的命名数据库对象，当该表出现特定事件时，将激活该对象
监听：记录的增加、修改、删除。
-- 创建触发器
CREATE TRIGGER trigger_name trigger_time trigger_event ON tbl_name FOR EACH ROW trigger_stmt
    参数：
    trigger_time是触发程序的动作时间。它可以是 before 或 after，以指明触发程序是在激活它的语句之前或之后触发。
    trigger_event指明了激活触发程序的语句的类型
        INSERT：将新行插入表时激活触发程序
        UPDATE：更改某一行时激活触发程序
        DELETE：从表中删除某一行时激活触发程序
    tbl_name：监听的表，必须是永久性的表，不能将触发程序与TEMPORARY表或视图关联起来。
    trigger_stmt：当触发程序激活时执行的语句。执行多个语句，可使用BEGIN<span class="token punctuation">..</span>.END复合语句结构
-- 删除
DROP TRIGGER <span class="token punctuation">[</span>schema_name.<span class="token punctuation">]</span>trigger_name
可以使用old和new代替旧的和新的数据
    更新操作，更新前是old，更新后是new.
    删除操作，只有old.
    增加操作，只有new.
-- 注意
    <span class="token number">1</span>. 对于具有相同触发程序动作时间和事件的给定表，不能有两个触发程序。
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>-- 字符连接函数
concat<span class="token punctuation">(</span>str1,str2,<span class="token punctuation">..</span>.<span class="token punctuation">]</span><span class="token punctuation">)</span>
concat_ws<span class="token punctuation">(</span>separator,str1,str2,<span class="token punctuation">..</span>.<span class="token punctuation">)</span>

-- 分支语句
<span class="token keyword">if</span> 条件 <span class="token keyword">then</span>
    执行语句
elseif 条件 <span class="token keyword">then</span>
    执行语句
<span class="token keyword">else</span>
    执行语句
end <span class="token keyword">if</span><span class="token punctuation">;</span>

-- 修改最外层语句结束符
delimiter 自定义结束符号
    SQL语句
自定义结束符号
delimiter <span class="token punctuation">;</span>     -- 修改回原来的分号

-- 语句块包裹
begin
    语句块
end

-- 特殊的执行
<span class="token number">1</span>. 只要添加记录，就会触发程序。
<span class="token number">2</span>. Insert into on duplicate key update 语法会触发：
    如果没有重复记录，会触发 before insert, after insert<span class="token punctuation">;</span>
    如果有重复记录并更新，会触发 before insert, before update, after update<span class="token punctuation">;</span>
    如果有重复记录但是没有发生更新，则触发 before insert, before update
<span class="token number">3</span>. Replace 语法 如果有记录，则执行 before insert, before delete, after delete, after insert
</code></pre></div><h2 id="sql编程"><a href="#sql编程" class="header-anchor">#</a> SQL编程</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>--// 局部变量 ----------
-- 变量声明
    <span class="token builtin class-name">declare</span> var_name<span class="token punctuation">[</span>,<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token builtin class-name">type</span> <span class="token punctuation">[</span>default value<span class="token punctuation">]</span>
    这个语句被用来声明局部变量。要给变量提供一个默认值，请包含一个default子句。值可以被指定为一个表达式，不需要为一个常数。如果没有default子句，初始值为null。
-- 赋值
    使用 <span class="token builtin class-name">set</span> 和 <span class="token keyword">select</span> into 语句为变量赋值。
    - 注意：在函数内是可以使用全局变量（用户自定义的变量）


--// 全局变量 ----------
-- 定义、赋值
<span class="token builtin class-name">set</span> 语句可以定义并为变量赋值。
<span class="token builtin class-name">set</span> @var <span class="token operator">=</span> value<span class="token punctuation">;</span>
也可以使用select into语句为变量初始化并赋值。这样要求select语句只能返回一行，但是可以是多个字段，就意味着同时为多个变量进行赋值，变量的数量需要与查询的列数一致。
还可以把赋值语句看作一个表达式，通过select执行完成。此时为了避免<span class="token operator">=</span>被当作关系运算符看待，使用:<span class="token operator">=</span>代替。（set语句可以使用<span class="token operator">=</span> 和 :<span class="token operator">=</span>）。
<span class="token keyword">select</span> @var:<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> @v1:<span class="token operator">=</span>id, @v2<span class="token operator">=</span>name from t1 limit <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> * from tbl_name where @var:<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> into 可以将表中查询获得的数据赋给变量。
    -<span class="token operator">|</span> <span class="token keyword">select</span> max<span class="token punctuation">(</span>height<span class="token punctuation">)</span> into @max_height from tb<span class="token punctuation">;</span>
-- 自定义变量名
为了避免select语句中，用户自定义的变量与系统标识符（通常是字段名）冲突，用户自定义变量在变量名前使用@作为开始符号。
@var<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
    - 变量被定义后，在整个会话周期都有效（登录到退出）



--// 控制结构 ----------
-- if语句
<span class="token keyword">if</span> search_condition <span class="token keyword">then</span>
    statement_list   
<span class="token punctuation">[</span>elseif search_condition <span class="token keyword">then</span>
    statement_list<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>else
    statement_list<span class="token punctuation">]</span>
end <span class="token keyword">if</span><span class="token punctuation">;</span>
-- case语句
CASE value WHEN <span class="token punctuation">[</span>compare-value<span class="token punctuation">]</span> THEN result
<span class="token punctuation">[</span>WHEN <span class="token punctuation">[</span>compare-value<span class="token punctuation">]</span> THEN result <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token punctuation">[</span>ELSE result<span class="token punctuation">]</span>
END
-- while循环
<span class="token punctuation">[</span>begin_label:<span class="token punctuation">]</span> <span class="token keyword">while</span> search_condition <span class="token keyword">do</span>
    statement_list
end <span class="token keyword">while</span> <span class="token punctuation">[</span>end_label<span class="token punctuation">]</span><span class="token punctuation">;</span>
- 如果需要在循环内提前终止 while循环，则需要使用标签；标签需要成对出现。
    -- 退出循环
        退出整个循环 leave
        退出当前循环 iterate
        通过退出的标签决定退出哪个循环



--// 内置函数 ----------
-- 数值函数
abs<span class="token punctuation">(</span>x<span class="token punctuation">)</span>          -- 绝对值 abs<span class="token punctuation">(</span>-10.9<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">10</span>
format<span class="token punctuation">(</span>x, d<span class="token punctuation">)</span>    -- 格式化千分位数值 format<span class="token punctuation">(</span><span class="token number">1234567.456</span>, <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1,234</span>,567.46
ceil<span class="token punctuation">(</span>x<span class="token punctuation">)</span>         -- 向上取整 ceil<span class="token punctuation">(</span><span class="token number">10.1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">11</span>
floor<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        -- 向下取整 floor <span class="token punctuation">(</span><span class="token number">10.1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">10</span>
round<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        -- 四舍五入去整
mod<span class="token punctuation">(</span>m, n<span class="token punctuation">)</span>       -- m%n m mod n 求余 <span class="token number">10</span>%3<span class="token operator">=</span><span class="token number">1</span>
pi<span class="token punctuation">(</span><span class="token punctuation">)</span>            -- 获得圆周率
pow<span class="token punctuation">(</span>m, n<span class="token punctuation">)</span>       -- m^n
sqrt<span class="token punctuation">(</span>x<span class="token punctuation">)</span>         -- 算术平方根
rand<span class="token punctuation">(</span><span class="token punctuation">)</span>          -- 随机数
truncate<span class="token punctuation">(</span>x, d<span class="token punctuation">)</span>  -- 截取d位小数
-- 时间日期函数
now<span class="token punctuation">(</span><span class="token punctuation">)</span>, current_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     -- 当前日期时间
current_date<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 -- 当前日期
current_time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 -- 当前时间
date<span class="token punctuation">(</span><span class="token string">'yyyy-mm-dd hh:ii:ss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    -- 获取日期部分
time<span class="token punctuation">(</span><span class="token string">'yyyy-mm-dd hh:ii:ss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    -- 获取时间部分
date_format<span class="token punctuation">(</span><span class="token string">'yyyy-mm-dd hh:ii:ss'</span>, <span class="token string">'%d %y %a %d %m %b %j'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> -- 格式化时间
unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               -- 获得unix时间戳
from_unixtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                -- 从时间戳获得时间
-- 字符串函数
length<span class="token punctuation">(</span>string<span class="token punctuation">)</span>          -- string长度，字节
char_length<span class="token punctuation">(</span>string<span class="token punctuation">)</span>     -- string的字符个数
substring<span class="token punctuation">(</span>str, position <span class="token punctuation">[</span>,length<span class="token punctuation">]</span><span class="token punctuation">)</span>      -- 从str的position开始,取length个字符
replace<span class="token punctuation">(</span>str ,search_str ,replace_str<span class="token punctuation">)</span>   -- 在str中用replace_str替换search_str
instr<span class="token punctuation">(</span>string ,substring<span class="token punctuation">)</span>    -- 返回substring首次在string中出现的位置
concat<span class="token punctuation">(</span>string <span class="token punctuation">[</span>,<span class="token punctuation">..</span>.<span class="token punctuation">]</span><span class="token punctuation">)</span>   -- 连接字串
charset<span class="token punctuation">(</span>str<span class="token punctuation">)</span>            -- 返回字串字符集
lcase<span class="token punctuation">(</span>string<span class="token punctuation">)</span>           -- 转换成小写
left<span class="token punctuation">(</span>string, length<span class="token punctuation">)</span>    -- 从string2中的左边起取length个字符
load_file<span class="token punctuation">(</span>file_name<span class="token punctuation">)</span>    -- 从文件读取内容
locate<span class="token punctuation">(</span>substring, string <span class="token punctuation">[</span>,start_position<span class="token punctuation">]</span><span class="token punctuation">)</span> -- 同instr,但可指定开始位置
lpad<span class="token punctuation">(</span>string, length, pad<span class="token punctuation">)</span>   -- 重复用pad加在string开头,直到字串长度为length
ltrim<span class="token punctuation">(</span>string<span class="token punctuation">)</span>           -- 去除前端空格
repeat<span class="token punctuation">(</span>string, count<span class="token punctuation">)</span>   -- 重复count次
rpad<span class="token punctuation">(</span>string, length, pad<span class="token punctuation">)</span>   --在str后用pad补充,直到长度为length
rtrim<span class="token punctuation">(</span>string<span class="token punctuation">)</span>           -- 去除后端空格
strcmp<span class="token punctuation">(</span>string1 ,string2<span class="token punctuation">)</span>    -- 逐字符比较两字串大小
-- 流程函数
<span class="token keyword">case</span> when <span class="token punctuation">[</span>condition<span class="token punctuation">]</span> <span class="token keyword">then</span> result <span class="token punctuation">[</span>when <span class="token punctuation">[</span>condition<span class="token punctuation">]</span> <span class="token keyword">then</span> result <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>else result<span class="token punctuation">]</span> end   多分支
if<span class="token punctuation">(</span>expr1,expr2,expr3<span class="token punctuation">)</span>  双分支。
-- 聚合函数
count<span class="token punctuation">(</span><span class="token punctuation">)</span>
sum<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
max<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
min<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
avg<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
group_concat<span class="token punctuation">(</span><span class="token punctuation">)</span>
-- 其他常用函数
md5<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
default<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

--// 存储函数，自定义函数 ----------
-- 新建
    CREATE FUNCTION function_name <span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span> RETURNS 返回值类型
        函数体
    - 函数名，应该合法的标识符，并且不应该与已有的关键字冲突。
    - 一个函数应该属于某个数据库，可以使用db_name.funciton_name的形式执行当前函数所属数据库，否则为当前数据库。
    - 参数部分，由<span class="token string">&quot;参数名&quot;</span>和<span class="token string">&quot;参数类型&quot;</span>组成。多个参数用逗号隔开。
    - 函数体由多条可用的mysql语句，流程控制，变量声明等语句构成。
    - 多条语句应该使用 begin<span class="token punctuation">..</span>.end 语句块包含。
    - 一定要有 <span class="token builtin class-name">return</span> 返回值语句。
-- 删除
    DROP FUNCTION <span class="token punctuation">[</span>IF EXISTS<span class="token punctuation">]</span> function_name<span class="token punctuation">;</span>
-- 查看
    SHOW FUNCTION STATUS LIKE <span class="token string">'partten'</span>
    SHOW CREATE FUNCTION function_name<span class="token punctuation">;</span>
-- 修改
    ALTER FUNCTION function_name 函数选项

--// 存储过程，自定义功能 ----------
-- 定义
存储存储过程 是一段代码（过程），存储在数据库中的sql组成。
一个存储过程通常用于完成一段业务逻辑，例如报名，交班费，订单入库等。
而一个函数通常专注与某个功能，视为其他程序服务的，需要在其他语句中调用函数才可以，而存储过程不能被其他调用，是自己执行 通过call执行。
-- 创建
CREATE PROCEDURE sp_name <span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span>
    过程体
参数列表：不同于函数的参数列表，需要指明参数类型
IN，表示输入型
OUT，表示输出型
INOUT，表示混合型
注意，没有返回值。


/* 存储过程 */ ------------------
存储过程是一段可执行性代码的集合。相比函数，更偏向于业务逻辑。
调用：CALL 过程名
-- 注意
- 没有返回值。
- 只能单独调用，不可夹杂在其他语句中
-- 参数
IN<span class="token operator">|</span>OUT<span class="token operator">|</span>INOUT 参数名 数据类型
IN      输入：在调用过程中，将数据输入到过程体内部的参数
OUT     输出：在调用过程中，将过程体处理完的结果返回到客户端
INOUT   输入输出：既可输入，也可输出
-- 语法
CREATE PROCEDURE 过程名 <span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span>
BEGIN
    过程体
END
</code></pre></div><h2 id="用户和权限管理"><a href="#用户和权限管理" class="header-anchor">#</a> 用户和权限管理</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>-- root密码重置
<span class="token number">1</span>. 停止MySQL服务
<span class="token number">2</span>.  <span class="token punctuation">[</span>Linux<span class="token punctuation">]</span> /usr/local/mysql/bin/safe_mysqld --skip-grant-tables <span class="token operator">&amp;</span>
    <span class="token punctuation">[</span>Windows<span class="token punctuation">]</span> mysqld --skip-grant-tables
<span class="token number">3</span>. use mysql<span class="token punctuation">;</span>
<span class="token number">4</span>. UPDATE <span class="token variable"><span class="token variable">`</span>user<span class="token variable">`</span></span> SET <span class="token assign-left variable">PASSWORD</span><span class="token operator">=</span>PASSWORD<span class="token punctuation">(</span><span class="token string">&quot;密码&quot;</span><span class="token punctuation">)</span> WHERE <span class="token variable"><span class="token variable">`</span>user<span class="token variable">`</span></span> <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
<span class="token number">5</span>. FLUSH PRIVILEGES<span class="token punctuation">;</span>
用户信息表：mysql.user
-- 刷新权限
FLUSH PRIVILEGES<span class="token punctuation">;</span>
-- 增加用户
CREATE <span class="token environment constant">USER</span> 用户名 IDENTIFIED BY <span class="token punctuation">[</span>PASSWORD<span class="token punctuation">]</span> 密码<span class="token punctuation">(</span>字符串<span class="token punctuation">)</span>
    - 必须拥有mysql数据库的全局CREATE <span class="token environment constant">USER</span>权限，或拥有INSERT权限。
    - 只能创建用户，不能赋予权限。
    - 用户名，注意引号：如 <span class="token string">'user_name'</span>@<span class="token string">'192.168.1.1'</span>
    - 密码也需引号，纯数字密码也要加引号
    - 要在纯文本中指定密码，需忽略PASSWORD关键词。要把密码指定为由PASSWORD<span class="token punctuation">(</span><span class="token punctuation">)</span>函数返回的混编值，需包含关键字PASSWORD
-- 重命名用户
RENAME <span class="token environment constant">USER</span> old_user TO new_user
-- 设置密码
SET PASSWORD <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'密码'</span><span class="token punctuation">)</span>  -- 为当前用户设置密码
SET PASSWORD FOR 用户名 <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'密码'</span><span class="token punctuation">)</span> -- 为指定用户设置密码
-- 删除用户
DROP <span class="token environment constant">USER</span> 用户名
-- 分配权限/添加用户
GRANT 权限列表 ON 表名 TO 用户名 <span class="token punctuation">[</span>IDENTIFIED BY <span class="token punctuation">[</span>PASSWORD<span class="token punctuation">]</span> <span class="token string">'password'</span><span class="token punctuation">]</span>
    - all privileges 表示所有权限
    - *.* 表示所有库的所有表
    - 库名.表名 表示某库下面的某表
    GRANT ALL PRIVILEGES ON <span class="token variable"><span class="token variable">`</span>pms<span class="token variable">`</span></span>.* TO <span class="token string">'pms'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'pms0817'</span><span class="token punctuation">;</span>
-- 查看权限
SHOW GRANTS FOR 用户名
    -- 查看当前用户权限
    SHOW GRANTS<span class="token punctuation">;</span> 或 SHOW GRANTS FOR CURRENT_USER<span class="token punctuation">;</span> 或 SHOW GRANTS FOR CURRENT_USER<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
-- 撤消权限
REVOKE 权限列表 ON 表名 FROM 用户名
REVOKE ALL PRIVILEGES, GRANT OPTION FROM 用户名   -- 撤销所有权限
-- 权限层级
-- 要使用GRANT或REVOKE，您必须拥有GRANT OPTION权限，并且您必须用于您正在授予或撤销的权限。
全局层级：全局权限适用于一个给定服务器中的所有数据库，mysql.user
    GRANT ALL ON *.*和 REVOKE ALL ON *.*只授予和撤销全局权限。
数据库层级：数据库权限适用于一个给定数据库中的所有目标，mysql.db, mysql.host
    GRANT ALL ON db_name.*和REVOKE ALL ON db_name.*只授予和撤销数据库权限。
表层级：表权限适用于一个给定表中的所有列，mysql.talbes_priv
    GRANT ALL ON db_name.tbl_name和REVOKE ALL ON db_name.tbl_name只授予和撤销表权限。
列层级：列权限适用于一个给定表中的单一列，mysql.columns_priv
    当使用REVOKE时，您必须指定与被授权列相同的列。
-- 权限列表
ALL <span class="token punctuation">[</span>PRIVILEGES<span class="token punctuation">]</span>    -- 设置除GRANT OPTION之外的所有简单权限
ALTER   -- 允许使用ALTER TABLE
ALTER ROUTINE   -- 更改或取消已存储的子程序
CREATE  -- 允许使用CREATE TABLE
CREATE ROUTINE  -- 创建已存储的子程序
CREATE TEMPORARY TABLES     -- 允许使用CREATE TEMPORARY TABLE
CREATE <span class="token environment constant">USER</span>     -- 允许使用CREATE <span class="token environment constant">USER</span>, DROP <span class="token environment constant">USER</span>, RENAME <span class="token environment constant">USER</span>和REVOKE ALL PRIVILEGES。
CREATE VIEW     -- 允许使用CREATE VIEW
DELETE  -- 允许使用DELETE
DROP    -- 允许使用DROP TABLE
EXECUTE     -- 允许用户运行已存储的子程序
FILE    -- 允许使用SELECT<span class="token punctuation">..</span>.INTO OUTFILE和LOAD DATA INFILE
INDEX   -- 允许使用CREATE INDEX和DROP INDEX
INSERT  -- 允许使用INSERT
LOCK TABLES     -- 允许对您拥有SELECT权限的表使用LOCK TABLES
PROCESS     -- 允许使用SHOW FULL PROCESSLIST
REFERENCES  -- 未被实施
RELOAD  -- 允许使用FLUSH
REPLICATION CLIENT  -- 允许用户询问从属服务器或主服务器的地址
REPLICATION SLAVE   -- 用于复制型从属服务器（从主服务器中读取二进制日志事件）
SELECT  -- 允许使用SELECT
SHOW DATABASES  -- 显示所有数据库
SHOW VIEW   -- 允许使用SHOW CREATE VIEW
SHUTDOWN    -- 允许使用mysqladmin <span class="token function">shutdown</span>
SUPER   -- 允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。
UPDATE  -- 允许使用UPDATE
USAGE   -- “无权限”的同义词
GRANT OPTION    -- 允许授予权限
</code></pre></div><h2 id="表维护"><a href="#表维护" class="header-anchor">#</a> 表维护</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>-- 分析和存储表的关键字分布
ANALYZE <span class="token punctuation">[</span>LOCAL <span class="token operator">|</span> NO_WRITE_TO_BINLOG<span class="token punctuation">]</span> TABLE 表名 <span class="token punctuation">..</span>.
-- 检查一个或多个表是否有错误
CHECK TABLE tbl_name <span class="token punctuation">[</span>, tbl_name<span class="token punctuation">]</span> <span class="token punctuation">..</span>. <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
option <span class="token operator">=</span> <span class="token punctuation">{</span>QUICK <span class="token operator">|</span> FAST <span class="token operator">|</span> MEDIUM <span class="token operator">|</span> EXTENDED <span class="token operator">|</span> CHANGED<span class="token punctuation">}</span>
-- 整理数据文件的碎片
OPTIMIZE <span class="token punctuation">[</span>LOCAL <span class="token operator">|</span> NO_WRITE_TO_BINLOG<span class="token punctuation">]</span> TABLE tbl_name <span class="token punctuation">[</span>, tbl_name<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
</code></pre></div><h2 id="杂项"><a href="#杂项" class="header-anchor">#</a> 杂项</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>. 可用反引号（`）为标识符（库名、表名、字段名、索引、别名）包裹，以避免与关键字重名！中文也可以作为标识符！
<span class="token number">2</span>. 每个库目录存在一个保存当前数据库的选项文件db.opt。
<span class="token number">3</span>. 注释：
    单行注释 <span class="token comment">## 注释内容</span>
    多行注释 /* 注释内容 */
    单行注释 -- 注释内容     <span class="token punctuation">(</span>标准SQL注释风格，要求双破折号后加一空格符（空格、TAB、换行等）<span class="token punctuation">)</span>
<span class="token number">4</span>. 模式通配符：
    _   任意单个字符
    %   任意多个字符，甚至包括零字符
    单引号需要进行转义 '
<span class="token number">5</span>. CMD命令行内的语句结束符可以为 <span class="token string">&quot;;&quot;</span>, <span class="token string">&quot;G&quot;</span>, <span class="token string">&quot;g&quot;</span>，仅影响显示结果。其他地方还是用分号结束。delimiter 可修改当前对话的语句结束符。
<span class="token number">6</span>. SQL对大小写不敏感
<span class="token number">7</span>. 清除已有语句：clear
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Just008/awesome/edit/master/docs/backend/sql/mysql/mysql-1000.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">3/18/2019, 4:10:56 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/awesome/backend/sql/mysql/join.html" class="prev">
          Join 学习总结
        </a></span> <span class="next"><a href="/awesome/backend/sql/mysql/z-interview.html">
          面试基础知识
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/awesome/assets/js/app.8cf76ae9.js" defer></script><script src="/awesome/assets/js/34.7d0f52fc.js" defer></script>
  </body>
</html>
